<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up</title>
    
    <style>
      html {
        background: none;
      }
      
      body {
        margin: 0 auto;
        padding: 0;
        text-align: left;
      }
      
      header {
        background: #63AF00;
        width: 100%;
        height: 78px;
        margin-bottom: 16px;
      }
      
      header img {
        margin: 0px 0 0 30.9px;
        width: 155.48px;
        height: 78px;
      }
      
      .basf-signUp {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        font-family: "Helvetica Neue Light";
        border: 2px solid seashell;
        height: auto;
        margin-bottom: 38px;
      }

      .basf-signUp #api {
        margin: 0 200px;
      }
      
      .basf-signUp #api .verifying-modal {
        display: none;
      }

      .basf-signUp #api .intro > p {
        font-size: 36px !important;
        font-weight: 300 !important;
        margin: 70px 0 31px 0;
        color: #333333;
        letter-spacing: normal;
        line-height: 44px;
      }

      .basf-signUp #attributeVerification .attr ul {
        margin: 0;
        padding: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .basf-signUp #attributeVerification .attr ul li {
        list-style: none;
        margin-top: 32px;
        flex: 0 0 45%;
      }
      
      .basf-signUp #attributeVerification .attr ul li:first-child,
      .basf-signUp #attributeVerification .attr ul li:nth-child(2) {
        margin-top: 0;
      }
      
      .basf-signUp #attributeVerification .attr ul li:nth-child(5),
      .basf-signUp #attributeVerification .attr ul li:nth-child(8),
      .basf-signUp #attributeVerification .attr ul li:nth-child(12) {
        flex: 0 0 100%;
      }
      
      .basf-signUp #attributeVerification .attr ul li:nth-child(10),
      .basf-signUp #attributeVerification .attr ul li:nth-child(11) {
        flex: 0 0 20%;
      }
			
			.basf-signUp #attributeVerification .attr ul li:nth-child(10) {
			margin-right: -16px;
			}

      .basf-signUp #attributeVerification .attr ul li .attrEntry label {
        font-size: 13px;
        line-height: 16px;
        color: #333333;
      }

      .basf-signUp #attributeVerification .attr ul li .attrEntry .textInput,
      .basf-signUp #attributeVerification .attr ul li .attrEntry .dropdown_single {
        font-size: 18px;
        padding: 16px 0 16px 18px;
        width: 100%;
        border: 0px solid #8f8f8f;
    		border-top: 1.5px double #a9a9a9;
        background: #f0f0f0;
        color: #8f8f8f;
        margin-top: 5px;
        outline: none;
      }
      
      .basf-signUp #attributeVerification .attr ul li .attrEntry.validate .error.itemLevel.show,
      .basf-signUp #attributeVerification .attr ul li .attrEntry.validate .error.itemLevel {
        color: #D20D26;
        font-size: 12px;
      }
       
			.basf-signUp #attributeVerification #requiredFieldMissing,
			.basf-signUp #attributeVerification #fieldIncorrect {
        font-size: 14px;
        color: #D20D26;
				margin-top: -16px;
				margin-bottom: 16px;
			}
			
			.basf-signUp #attributeVerification #passwordEntryMismatch {
				width: 360px;
				color: #D20D26;
				font-size: 12px;
				margin-top: 0;
				margin-bottom: -16px;
			}
      
      .basf-signUp #attributeVerification .buttons {
        display: flex;
        flex-direction: row-reverse;
        margin: 60px 0 150px 0;
      }

      .basf-signUp #attributeVerification .buttons #continue {
        color: #fff;
        background-color: #63af00;
        border: none;
        font-size: 16px;
        line-height: 18px;
        padding: 20px 33px;
        cursor: pointer;
        margin: 0 -16px 0 32px;
      }

      .basf-signUp #attributeVerification .buttons #cancel {
        border: none;
        background: none;
        color: #60b100;
        font-size: 16px;
        line-height: 18px;
        font-family: "Helvetica Neue Roman";
      }
      
      .basf-signUp #attributeVerification  #claimVerificationServerError {
        font-size: 14px;
        color: #D20D26;
      }
			
			.basf-signUp #attributeVerification .attr ul li .attrEntry a {
				display: none;
			}
      
      .basf-signUp #attributeVerification .attr ul li .attrEntry .error.itemLevel:not(:nth-of-type(1)) {
        display: none;
      }
			
			#claimVerificationServerError {
				display: none !important;
			}
			
			/* Media Queries */
			/* Mobile Layout*/
			@media (max-width: 767px) {
				.basf-signUp #api {
						margin: 0 16px;
				}
				
				.basf-signUp #api .intro > p {
					margin-top: 40px;
					margin-bottom: 20px;
					font-size: 28px !important;
				}
				
				.basf-signUp #api #attributeList {
					margin-right: 16px;
				}
				
				.basf-signUp #attributeVerification .attr ul li {
					flex: 0 0 100%;
					margin-top: 0;
    			margin-bottom: 24px;
				}
				
				.basf-signUp #attributeVerification .attr ul li:nth-child(10),
				.basf-signUp #attributeVerification .attr ul li:nth-child(11){
					flex: 0 0 47%;
				}
				
				.basf-signUp #attributeVerification .attr ul li .attrEntry .textInput,
      	.basf-signUp #attributeVerification .attr ul li .attrEntry .dropdown_single {
					font-size: 14px;
    			padding: 12px 0 12px 12px;
				}
				
				.basf-signUp #attributeVerification .buttons {
					margin: 32px 16px 48px 0;
				}
			}
			
			/*Tablet Layout */
			@media (max-width: 991px) and (min-width: 768px) {
				.basf-signUp #api {
					margin: 0 100px 0 80px;
				}
			}
			
			/*Tablet Portrait */
			@media only screen and (max-device-width: 1366px) and (min-device-width: 1024px) and (orientation: portrait) {
				.basf-signUp #api {
					margin: 0 100px 0 80px;
				}
			}

    </style>
  </head>
  <body>
    <header>
      <img
        src="https://raw.githubusercontent.com/Rraj-github/mark-basf/master/BASFo_wh100lg_3c.jpg" />
    </header>
    <div class="basf-signUp">
      <div id="api"></div>
    </div>
    
    <script>
      $(document).ready(function () {
        $("#api .intro>p").html("Create your BASF account");
        $(".buttons #cancel").html("Back");
        $("div.error.itemLevel").detach().appendTo(".basf-signUp #attributeVerification .attr ul li .attrEntry");
				$("#claimVerificationServerError").detach().appendTo(".basf-signUp #attributeVerification .attr ul li:nth-child(5) .attrEntry");
				$("#passwordEntryMismatch").detach().appendTo(".basf-signUp #attributeVerification .attr ul li:nth-child(7) .attrEntry");
      });

// 			$("#continue").click(function() {
// 				var emailInput = $("#email").val();
// 				if($("#claimVerificationServerError").attr('aria-hidden')=="false") {
// 					$("li:nth-child(5) .attrEntry.validate").append("<p> This is a test message. </p>");
// 				}
// // 				setTimeout(function() {
// // 					$("#claimVerificationServerError").html(emailInput + " is already registered. Please try log in or try another email.");
// // 				}, 3000);
// 			});

			$("#fieldIncorrect").removeAttr("tabindex");
			$("#passwordEntryMismatch").removeAttr("tabindex");

			if($("#requiredFieldMissing").attr('aria-hidden') == "false") {
				 $("#requiredFieldMissing").removeAttr("tabindex");
			}
			
			function emailExistsObserver() {
					// Select the node that will be observed for mutations
					var emailExists = document.getElementById("claimVerificationServerError");

					// Options for the observer (which mutations to observe)
					var config = { attributes: true, childList: true, subtree: true };

					// Callback function to execute when mutations are observed
					var callback = function (mutationsList, observer) {
						var emailInput = $("#email").val();
						// Use traditional 'for loops' for IE 11
						for (let mutation of mutationsList) {
							if (mutation.type === "attributes") {
								if (mutation.attributeName == "aria-hidden") {
									if (mutation.target.getAttribute(mutation.attributeName) == "true") {
									} else if ( mutation.target.getAttribute(mutation.attributeName) == "false") {
// 											$("li:nth-child(5) .attrEntry.validate").append("<p> This is a test message. </p>");
											$("#claimVerificationServerError").html(emailInput + " is already registered. Please try log in or try another email.");
											console.log(emailInput);
									}
								}
							}
						}
					};

					// Create an observer instance linked to the callback function
					var observer = new MutationObserver(callback);

					// Start observing the target node for configured mutations
					observer.observe(emailExists, config);
				}
			
				emailExistsObserver();
		</script>
  </body>
</html>
